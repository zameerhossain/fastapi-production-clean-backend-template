# -----------------------------
# Mypy configuration for FastAPI + Pydantic v2
# -----------------------------

[mypy]
# Enable strict type checking
strict = True

# Ignore missing imports for third-party libraries (common with FastAPI & Pydantic)
ignore_missing_imports = True

# Allow untyped function definitions if needed (for FastAPI route functions)
disallow_untyped_defs = False

# Ignore unused ignores (so you can safely use # type: ignore)
warn_unused_ignores = True

# Check untyped calls in strict mode
check_untyped_defs = True

# Allow dynamic attributes on Pydantic models (like extra fields)
allow_redefinition = True

# -----------------------------
# Specific tweaks for Pydantic v2
# -----------------------------

# `_env_file` parameter is not in type stub, ignore type errors for it
[mypy-pydantic.*]
ignore_missing_imports = True

[mypy-pydantic_settings.*]
ignore_missing_imports = True

# -----------------------------
# Optional: Suppress literal type errors from _env_file usage
# -----------------------------
[mypy-your_project.settings]
# Ignore "_env_file" unexpected argument in your settings.py
# Replace 'your_project' with your Python module/package name
ignore_errors = True
